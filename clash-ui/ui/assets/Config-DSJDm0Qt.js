import{$ as e,Cn as t,Ct as n,Dn as r,Fn as i,H as a,Jt as o,Lt as s,M as c,Mn as l,Mt as u,N as d,Nn as f,Nt as p,O as m,On as h,Pn as g,Pt as _,Q as v,Rt as ee,S as y,Sn as b,St as x,Tn as S,U as C,Ut as w,V as te,Wt as T,X as E,Yt as D,Z as O,_ as k,_t as A,b as j,d as ne,et as re,fn as ie,g as ae,gt as oe,i as M,jn as N,kn as P,ln as F,n as se,nt as ce,qt as I,r as L,rt as R,t as z,tt as B,v as V,vn as H,wn as U,wt as W,x as G,y as K,zn as q,zt as le}from"./index-BZbSGIBZ.js";var ue=t(`<input type=checkbox>`),de=t(`<input>`),fe=t(`<select>`),pe=t(`<label>`),me=t(`<option>A`),he=t(`<option>AAAA`),ge=t(`<option>CNAME`),J=t(`<option>TXT`),_e=t(`<option>MX`),ve=t(`<option>SRV`),ye=t(`<option>HTTPS`),be=t(`<option>NS`),xe=t(`<option>DNSKEY`),Se=t(`<option>DS`),Ce=t(`<option>SIG`),we=t(`<option>SOA`),Te=t(`<option>RRSIG`),Ee=t(`<option>RP`),De=t(`<div class="flex flex-col overflow-auto p-4">`),Oe=t(`<div class="flex flex-col"><form class=join>`),ke=t(`<div class=py-2>`),Ae=t(`<div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset>`),je=t(`<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">`),Me=t(`<div class="flex flex-col gap-4"><div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset></div><div class="grid grid-cols-2 gap-4 sm:grid-cols-2">`),Y=t(`<option>`),Ne=t(`<fieldset class=fieldset>`),Pe=t(`<div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col">`),Fe=t(`<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col"></div><div class="flex flex-col"></div><div class="flex flex-col items-center"><div class=h-10></div></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><div class=h-10></div></div></div><div class="col-span-1 flex flex-col gap-2 sm:col-span-2">`),Ie=t(`<div class="mx-auto flex max-w-3xl flex-col gap-4">`),X=e=>{let[t,n]=q(e,[`class`]);return(()=>{var e=ue();return b(e,i({get class(){return F(`toggle`,t.class)}},n),!1,!1),e})()},Z=e=>{let[t,n]=q(e,[`class`]);return(()=>{var e=de();return b(e,i({get class(){return F(`input min-w-0`,t.class)}},n),!1,!1),e})()},Q=e=>{let[t,n]=q(e,[`class`]);return(()=>{var e=fe();return b(e,i({get class(){return F(`select`,t.class)}},n),!1,!0),H(e,()=>h(()=>n.children)()),e})()},$=e=>{let[t,n]=q(e,[`class`]);return(()=>{var e=pe();return b(e,i({get class(){return F(`label truncate`,t.class)}},n),!1,!0),H(e,()=>h(()=>n.children)()),e})()},Le=V({name:K(),type:K()}),Re=()=>{let[e]=C(),t=d(),n=`google.com`,{form:i,isSubmitting:a}=G({extend:j({schema:Le}),onSubmit:e=>t.get(`dns/query`,{searchParams:{name:e.name||n,type:e.type}}).json().then(({Answer:e})=>s(e?.map(({data:e})=>e)||[])).catch(e=>ie.error(e.message))}),[o,s]=g([]);return(()=>{var t=Oe(),c=t.firstChild;return U(i,c,()=>i),H(c,P(Z,{type:`search`,name:`name`,class:`join-item w-full`,placeholder:n,onInput:e=>{e.target.value||s([])}}),null),H(c,P(Q,{name:`type`,class:`join-item max-w-max`,get children(){return[me(),he(),ge(),J(),_e(),ve(),ye(),be(),xe(),Se(),Ce(),we(),Te(),Ee()]}}),null),H(c,P(D,{type:`submit`,class:`join-item max-w-max btn-primary`,get loading(){return a()},get children(){return e(`dnsQuery`)}}),null),H(t,P(r,{get when(){return o().length>0},get children(){var e=De();return H(e,P(S,{get each(){return o()},children:e=>(()=>{var t=ke();return H(t,e),t})()})),e}}),null),t})()},ze=V({port:k(),"socks-port":k(),"redir-port":k(),"tproxy-port":k(),"mixed-port":k()}),Be=({isSingBox:t})=>{let[n]=C(),i=se(),a=M(),o=(e,t)=>{a.mutate({key:e,value:t})},s=[{label:()=>n(`port`,{name:`Mixed`}),key:`mixed-port`,onChange:e=>o(`mixed-port`,Number(e.target.value))},{label:()=>n(`port`,{name:`HTTP`}),key:`port`,onChange:e=>o(`port`,Number(e.target.value))},{label:()=>n(`port`,{name:`Socks`}),key:`socks-port`,onChange:e=>o(`socks-port`,Number(e.target.value))},{label:()=>n(`port`,{name:`Redir`}),key:`redir-port`,onChange:e=>o(`redir-port`,Number(e.target.value))},{label:()=>n(`port`,{name:`TProxy`}),key:`tproxy-port`,onChange:e=>o(`tproxy-port`,Number(e.target.value))}],{form:c,setInitialValues:u,reset:d}=G({extend:j({schema:ze})});N(()=>{let e=i.data;e&&(u(e),d())});let p=l(()=>{let e=i.data;return e?.[`mode-list`]||e?.modes||[`rule`,`direct`,`global`]});return(()=>{var a=Me(),l=a.firstChild,u=l.firstChild,d=u.nextSibling,m=d.nextSibling,h=l.nextSibling;return H(u,P($,{for:`enable-allow-lan`,get children(){return n(`allowLan`)}}),null),H(u,P(X,{id:`enable-allow-lan`,get checked(){return i.data?.[`allow-lan`]},onChange:e=>o(`allow-lan`,e.target.checked)}),null),H(d,P($,{for:`mode`,get children(){return n(`runningMode`)}}),null),H(d,P(Q,{id:`mode`,onChange:e=>o(`mode`,e.target.value),get children(){return P(S,{get each(){return p()},children:e=>(()=>{var t=Y();return t.value=e,H(t,()=>n(e)??e),f(()=>t.selected=e===i.data?.mode),t})()})}}),null),H(m,P($,{for:`interface-name`,get children(){return n(`outboundInterfaceName`)}}),null),H(m,P(Z,{id:`interface-name`,get value(){return i.data?.[`interface-name`]},onChange:e=>o(`interface-name`,e.target.value)}),null),H(a,P(r,{get when(){return!t()},get children(){return[(()=>{var e=Ae(),t=e.firstChild,r=t.nextSibling,a=r.nextSibling;return H(t,P($,{for:`enable-tun-device`,get children(){return n(`enableTunDevice`)}}),null),H(t,P(X,{id:`enable-tun-device`,get checked(){return i.data?.tun?.enable},onChange:e=>o(`tun`,{enable:e.target.checked})}),null),H(r,P($,{for:`tun-ip-stack`,get children(){return n(`tunModeStack`)}}),null),H(r,P(Q,{id:`tun-ip-stack`,onChange:e=>o(`tun`,{stack:e.target.value}),get children(){return P(S,{each:[`Mixed`,`gVisor`,`System`,`LWIP`],children:e=>(()=>{var t=Y();return t.value=e,H(t,e),f(()=>t.selected=i.data?.tun?.stack===e),t})()})}}),null),H(a,P($,{for:`device-name`,get children(){return n(`tunDeviceName`)}}),null),H(a,P(Z,{id:`device-name`,get value(){return i.data?.tun?.device},onChange:e=>o(`tun`,{device:e.target.value})}),null),e})(),(()=>{var e=je();return U(c,e,()=>c),H(e,P(S,{each:s,children:e=>(()=>{var t=Ne();return H(t,P($,{get for(){return e.key},get children(){return e.label()}}),null),H(t,P(Z,{get id(){return e.key},get name(){return e.key},type:`number`,get placeholder(){return e.label()},get onChange(){return e.onChange}}),null),t})()})),e})()]}}),h),H(h,P(D,{class:`btn-primary`,get loading(){return e()},onClick:v,get children(){return n(`reloadConfig`)}}),null),H(h,P(D,{class:`btn-accent`,get loading(){return O()},onClick:E,get children(){return n(`flushFakeIP`)}}),null),H(h,P(D,{class:`btn-warning`,get loading(){return B()},onClick:re,get children(){return n(`restartCore`)}}),null),H(h,P(r,{get when(){return!t()},get children(){return P(D,{class:`btn-secondary`,get loading(){return R()},onClick:ce,get children(){return n(`updateGEODatabases`)}})}}),null),a})()},Ve=()=>{let[e]=C(),t=ae(),i=[{label:`English`,value:T.EN},{label:`简体中文`,value:T.ZH},{label:`Русский`,value:T.RU}],l=[{label:`SystemUI`,value:w.SystemUI},{label:`FiraSans`,value:w.FiraSans}];return(()=>{var d=Fe(),h=d.firstChild,g=h.firstChild,v=g.nextSibling,b=v.nextSibling,C=b.nextSibling,w=C.firstChild,T=h.nextSibling,E=T.firstChild,O=E.firstChild,k=T.nextSibling;return H(g,P(y,{get children(){return e(`switchFont`)}}),null),H(g,P(Q,{class:`w-full`,onChange:e=>le(e.target.value),get children(){return P(S,{each:l,children:e=>(()=>{var t=Y();return H(t,()=>e.label),f(()=>t.selected=W()===e.value),f(()=>t.value=e.value),t})()})}}),null),H(v,P(y,{get children(){return e(`switchLanguage`)}}),null),H(v,P(Q,{class:`w-full`,onChange:e=>a(e.target.value),get children(){return P(S,{each:i,children:e=>(()=>{var t=Y();return H(t,()=>e.label),f(()=>t.selected=te()===e.value),f(()=>t.value=e.value),t})()})}}),null),H(b,P(y,{get children(){return m()?.url}}),null),H(b,P(D,{class:`btn-info`,onClick:()=>{c(``),t(I.Setup)},get children(){return e(`switchEndpoint`)}}),null),H(C,P(y,{get children(){return e(`autoSwitchEndpoint`)}}),w),H(w,P(X,{get checked(){return oe()},onChange:e=>p(e.target.checked)})),H(E,P(y,{get children(){return e(`autoSwitchTheme`)}}),O),H(O,P(X,{get checked(){return A()},onChange:e=>_(e.target.checked)})),H(T,P(r,{get when(){return A()},get children(){var t=Pe(),r=t.firstChild,i=r.nextSibling;return H(r,P(y,{get children(){return e(`favDayTheme`)}}),null),H(r,P(Q,{class:`w-full`,onChange:e=>s(e.target.value),get children(){return P(S,{each:o,children:e=>(()=>{var t=Y();return t.value=e,H(t,e),f(()=>t.selected=x()===e),t})()})}}),null),H(i,P(y,{get children(){return e(`favNightTheme`)}}),null),H(i,P(Q,{class:`w-full`,onChange:e=>ee(e.target.value),get children(){return P(S,{each:o,children:e=>(()=>{var t=Y();return t.value=e,H(t,e),f(()=>t.selected=n()===e),t})()})}}),null),t}}),null),H(k,P(D,{class:`btn-error`,onClick:()=>u(),get children(){return e(`resetSettings`)}})),d})()},He=()=>{let[e]=C(),t=L(),n=()=>t.data??``,i=l(()=>n()?.includes(`sing-box`)||!1);return[P(ne,{get children(){return e(`config`)}}),(()=>{var a=Ie();return H(a,P(r,{get when(){return!i()},get children(){return[P(y,{withDivider:!0,get children(){return e(`dnsQuery`)}}),P(Re,{})]}}),null),H(a,P(y,{withDivider:!0,get children(){return e(`coreConfig`)}}),null),H(a,P(Be,{isSingBox:i}),null),H(a,P(y,{withDivider:!0,get children(){return e(`xdConfig`)}}),null),H(a,P(Ve,{}),null),H(a,P(y,{withDivider:!0,get children(){return e(`version`)}}),null),H(a,P(r,{get when(){return!t.isLoading},get children(){return P(z,{frontendVersion:`v1.218.0`,backendVersion:n})}}),null),a})()]};export{He as default};