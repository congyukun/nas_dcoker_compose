import{t as e}from"./IconChevronRight-Dj4Dpy4R.js";import{n as t,t as n}from"./sync-BEibOPvM.js";import{At as r,B as i,Bt as a,Cn as o,Dn as s,Dt as c,E as l,Et as u,F as d,Kt as f,Mn as p,Nn as m,On as h,P as g,Pn as _,R as ee,Rn as v,Tn as y,Tt as b,U as te,Yt as x,_n as S,a as C,c as w,cn as T,ct as E,d as D,dn as O,gn as ne,jt as k,kn as A,kt as j,l as re,ln as M,o as N,s as P,sn as ie,un as F,vn as I,w as L,xn as R,yn as z,z as ae}from"./index-BZbSGIBZ.js";var B=T(`outline`,`brand-speedtest`,`BrandSpeedtest`,[[`path`,{d:`M5.636 19.364a9 9 0 1 1 12.728 0`}],[`path`,{d:`M16 9l-4 4`}]]),V={width:0,height:0};function H(){return{width:window.innerWidth,height:window.innerHeight}}function U(){let[e,t]=F(V,H);return O(window,`resize`,()=>t(H())),e}var W=o(`<div class=mb-2>`),G=o(`<div class="flex gap-2"><div class=flex-1></div><div class=flex-1>`),K=o(`<div class="grid grid-cols-1 place-items-start gap-2">`);const q=e=>{let t=U(),n=p(()=>t.width>480);return()=>{let t=h(()=>e.children),r=e=>t()?.filter((t,n)=>n%2===e).map(e=>(()=>{var t=W();return I(t,e),t})());return k()&&n()?(()=>{var e=G(),t=e.firstChild,n=t.nextSibling;return I(t,()=>r(0)),I(n,()=>r(1)),e})():(()=>{var e=K();return I(e,t),e})()}};var oe=o(`<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-box tabs gap-2 tabs-sm"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">`),se=o(`<button><span></span><div class="badge badge-sm">`),J=o(`<div>`),ce=o(`<span class=whitespace-nowrap>`),le=o(`<div class=space-y-2><div class="flex items-center justify-between pr-8"><div class="flex items-center"><span></span><div class="ml-2 badge badge-sm"></div></div></div><div class="flex flex-wrap items-center justify-between gap-2"><div class="badge badge-sm badge-primary"><span class=font-bold></span></div><div class="badge badge-sm badge-secondary">/s`),ue=o(`<img>`),de=o(`<div class="flex items-center justify-between pr-8"><div class="flex flex-wrap items-center gap-1"><span class="line-clamp-1 break-all"></span><div class="badge badge-sm"></div><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">`),fe=o(`<div class="flex flex-col gap-2"><div class="text-sm text-slate-500"> `),Y=function(e){return e.proxyProviders=`proxyProviders`,e.proxies=`proxies`,e}(Y||{}),X=()=>{let o,[h]=te(),{fetchProxies:S,proxies:T,selectProxyInGroup:O,proxyProviders:k,updateProviderByProviderName:F,updateAllProvider:z,proxyGroupLatencyTest:V,proxyProviderLatencyTest:H,proxyGroupLatencyTestingMap:U,proxyProviderLatencyTestingMap:W,isAllProviderUpdating:G,updatingMap:K}=g(),X=p(()=>T().filter(e=>!e.hidden)),{speedGroupByName:pe}=E(),[Z,me]=a(_({}),{name:`collapsedMap`,storage:localStorage}),Q=(e,t)=>{me(n=>({...n,[e]:t}))};v(S),n(S,{staleTime:3e4});let he=async(e,t)=>{e.stopPropagation(),V(t)},ge=e=>e.replace(`<svg`,~e.indexOf(`xmlns`)?`<svg`:`<svg xmlns="http://www.w3.org/2000/svg"`).replace(/"/g,`'`).replace(/%/g,`%25`).replace(/#/g,`%23`).replace(/\{/g,`%7B`).replace(/\}/g,`%7D`).replace(/</g,`%3C`).replace(/>/g,`%3E`),_e=(e,t)=>{e.stopPropagation(),H(t)},ve=(e,t)=>{e.stopPropagation(),F(t)},ye=async e=>{e.stopPropagation(),z()},[$,be]=_(Y.proxies),xe=()=>[{type:Y.proxies,name:h(`proxies`),count:X().length},{type:Y.proxyProviders,name:h(`proxyProviders`),count:k().length}];return[A(D,{get children(){return h(`proxies`)}}),(()=>{var n=oe(),a=n.firstChild,g=a.firstChild,_=g.nextSibling,v=a.nextSibling;return I(g,A(y,{get each(){return xe()},children:e=>(()=>{var t=se(),n=t.firstChild,r=n.nextSibling;return t.$$click=()=>be(e.type),I(n,()=>e.name),I(r,()=>e.count),m(()=>ne(t,M($()===e.type&&`bg-primary text-neutral!`,`sm:tab-md tab gap-2 px-2`))),t})()})),I(a,A(s,{get when(){return $()===Y.proxyProviders},get children(){return A(x,{class:`btn btn-circle btn-sm`,get disabled(){return G()},onClick:e=>ye(e),get icon(){return A(t,{get class(){return M(G()&&`animate-spin text-success`)}})}})}}),_),I(_,A(x,{class:`btn-circle btn-sm btn-primary`,onClick:()=>o?.showModal(),get icon(){return A(ie,{})}})),I(v,A(s,{get when(){return $()===Y.proxies},get children(){return A(q,{get children(){return A(y,{get each(){return X()},children:t=>{let n=p(()=>ee({proxyNames:i({proxyNames:t.all??[],orderingType:r(),testUrl:t.testUrl||null}),enabled:b(),testUrl:t.testUrl||null}));return A(l,{get isOpen(){return Z()[t.name]},title:(()=>{var r=le(),i=r.firstChild,a=i.firstChild,o=a.firstChild,l=o.nextSibling,d=i.nextSibling.firstChild,f=d.firstChild,p=d.nextSibling,h=p.firstChild;return I(a,A(s,{get when(){return t.icon},get children(){return A(s,{get when(){return t.icon.startsWith(`data:image/svg+xml`)},get fallback(){return(()=>{var e=ue();return m(n=>{var r=t.icon,i=`${u()}px`,a=`${c()}px`;return r!==n.e&&R(e,`src`,n.e=r),i!==n.t&&((n.t=i)==null?e.style.removeProperty(`height`):e.style.setProperty(`height`,i)),a!==n.a&&((n.a=a)==null?e.style.removeProperty(`margin-right`):e.style.setProperty(`margin-right`,a)),n},{e:void 0,t:void 0,a:void 0}),e})()},get children(){var e=J();return e.style.setProperty(`color`,`oklch(var(--p) / var(--tw-bg-opacity))`),e.style.setProperty(`background-color`,`currentColor`),e.style.setProperty(`mask-size`,`100% 100%`),m(n=>{var r=`${u()}px`,i=`${u()}px`,a=`${c()}px`,o=`url("${ge(t.icon)}")`;return r!==n.e&&((n.e=r)==null?e.style.removeProperty(`height`):e.style.setProperty(`height`,r)),i!==n.t&&((n.t=i)==null?e.style.removeProperty(`width`):e.style.setProperty(`width`,i)),a!==n.a&&((n.a=a)==null?e.style.removeProperty(`margin-right`):e.style.setProperty(`margin-right`,a)),o!==n.o&&((n.o=o)==null?e.style.removeProperty(`mask-image`):e.style.setProperty(`mask-image`,o)),n},{e:void 0,t:void 0,a:void 0,o:void 0}),e}})}}),o),I(o,()=>t.name),I(l,()=>t.all?.length),I(i,A(x,{class:`btn-circle btn-sm`,get disabled(){return U()[t.name]},onClick:e=>he(e,t.name),get icon(){return A(B,{get class(){return M(U()[t.name]&&`animate-pulse text-success`)}})}}),null),I(f,()=>ae(t.type)),I(d,A(s,{get when(){return t.now?.length>0},get children(){return[A(e,{size:18}),(()=>{var e=ce();return I(e,()=>t.now),e})()]}}),null),I(p,()=>L(pe()[t.name]??0).toString(),h),I(r,A(s,{get when(){return!Z()[t.name]},get children(){return A(N,{get proxyNameList(){return n()},get now(){return t.now},get testUrl(){return t.testUrl||null},onSelect:e=>void O(t,e)})}}),null),r})(),onCollapse:e=>Q(t.name,e),get children(){return A(y,{get each(){return n()},children:e=>A(s,{get when(){return j()===f.LIST},get fallback(){return A(w,{proxyName:e,get testUrl(){return t.testUrl||null},get timeout(){return t.timeout??null},get isSelected(){return t.now===e},onClick:()=>void O(t,e)})},get children(){return A(P,{proxyName:e,get testUrl(){return t.testUrl||null},get timeout(){return t.timeout??null},get isSelected(){return t.now===e},onClick:()=>void O(t,e)})}})})}})}})}})}}),null),I(v,A(s,{get when(){return $()===Y.proxyProviders},get children(){return A(q,{get children(){return A(y,{get each(){return k()},children:e=>{let n=p(()=>i({orderingType:r(),proxyNames:e.proxies.map(e=>e.name)??[],testUrl:e.testUrl}));return A(l,{get isOpen(){return Z()[e.name]},title:[(()=>{var n=de(),r=n.firstChild,i=r.firstChild,a=i.nextSibling,o=a.nextSibling,s=r.nextSibling;return I(i,()=>e.name),I(a,()=>e.proxies.length),I(o,()=>e.vehicleType),I(s,A(x,{class:`btn btn-circle btn-sm`,get disabled(){return K()[e.name]},onClick:t=>ve(t,e.name),get icon(){return A(t,{get class(){return M(K()[e.name]&&`animate-spin text-success`)}})}}),null),I(s,A(x,{class:`btn btn-circle btn-sm`,get disabled(){return W()[e.name]},onClick:t=>_e(t,e.name),get icon(){return A(B,{get class(){return M(W()[e.name]&&`animate-pulse text-success`)}})}}),null),n})(),A(C,{get subscriptionInfo(){return e.subscriptionInfo}}),(()=>{var t=fe(),r=t.firstChild,i=r.firstChild;return I(r,()=>h(`updated`),i),I(r,()=>d(e.updatedAt),null),I(t,A(s,{get when(){return!Z()[e.name]},get children(){return A(N,{get proxyNameList(){return n()},get testUrl(){return e.testUrl}})}}),null),t})()],onCollapse:t=>Q(e.name,t),get children(){return A(y,{get each(){return n()},children:t=>A(s,{get when(){return j()===f.LIST},get fallback(){return A(w,{proxyName:t,get testUrl(){return e.testUrl},get timeout(){return e.timeout??null}})},get children(){return A(P,{proxyName:t,get testUrl(){return e.testUrl},get timeout(){return e.timeout??null}})}})})}})}})}})}}),null),I(n,A(re,{ref:e=>o=e}),null),n})()]};S([`click`]);export{X as default};